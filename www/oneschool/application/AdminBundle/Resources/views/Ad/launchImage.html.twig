{% extends 'LycheeAdminBundle:Ad:layout.html.twig' %}

{% block brewacrumb %}
    <li class="active"><a href="{{ path('lychee_admin_ad_launcher') }}">启动页</a></li>
    <li class="active">{{ subTitle }}</li>
{% endblock %}

{% block body %}
    <div class="alert alert-warning" role="alert">
        <p>上传不同尺寸的图片</p>
        <p>点击最下方的“保存”按钮</p>
    </div>
    <div class="col-md-6 col-sm-8">
        <form role="form" action="{{ path('lychee_admin_ad_imagesupload') }}" method="post" enctype="multipart/form-data">
            <div class="form-group">
                <input type="file" class="form-control launch-image" name="launch_images[]">
            </div>
            <div class="form-group">
                <input type="file" class="form-control launch-image" name="launch_images[]">
            </div>
            <div class="form-group">
                <button type="button" class="btn btn-default" id="add_launch_image">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">保 存</button>
            </div>
        </form>
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets '@fileinput_css' filter="cssrewrite" %}
    <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts '@fileinput_js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <script>
        $(document).ready(function() {
            var fileinputConfig = {
                allowedFileTypes: ['image'],
                showUpload: false
            };
            $(".launch-image").fileinput(fileinputConfig);
            $("#add_launch_image").on("click", function() {
                var $btnFormGroup = $(this).parent();
                var $fileUpload = $('<div class="form-group">' +
                        '<input type="file" class="form-control launch-image" name="launch_images[]">' +
                        '</div>');
                $btnFormGroup.before($fileUpload);
                $fileUpload.children().first().fileinput(fileinputConfig);

                return false;
            });
        });
    </script>
{% endblock %}