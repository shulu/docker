{% extends 'LycheeAdminBundle:Inquiry:layout.html.twig' %}

{% block body %}
    <div class="clearfix">
        <div class="col-lg-4 pull-right">
            <form>
                <div class="input-group">
                    <input type="text" name="query" class="form-control" placeholder="次元名称或ID" value="{{ query|default('') }}">
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="submit">搜索</button>
                </span>
                </div><!-- /input-group -->
            </form>
        </div><!-- /.col-lg-6 -->
    </div>
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
            <tr>
                <th>ID</th>
                <th>标题</th>
                <th>创建时间</th>
                <th>帖子数量</th>
                <th>角标</th>
                <th>状态</th>
            </tr>
            </thead>
            <tbody id="topic_tbody">
            {% for topic in topics %}
                <tr class="{{ topic.deleted? 'danger' }}">
                    <td><a href="{{ path('lychee_admin_inquiry_topicdetail', {topicId: topic.id}) }}" target="_blank">{{ topic.id }}</a></td>
                    <td>{{ topic.title }}</td>
                    <td>{{ topic.createTime|date('Y-m-d H:i:s') }}</td>
                    <td>{{ topic.postCount }}</td>
                    <td>{{ topic.opMark }}</td>
                    <td>{{ topic.deleted? '已删除':'活跃' }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <input type="hidden" id="next_cursor" value="{{ nextCursor }}">
    {% if paginator is not null %}
        {% import 'LycheeAdminBundle::helper.html.twig' as helper %}
        {{ helper.pagination(paginator, app.request.get('_route')) }}
    {% else %}
        {% if nextCursor != 0 %}
            <div class="load-more-wrap"><button class="btn btn-default" id="load_more_topics">加载更多</button></div>
        {% endif %}
    {% endif %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        tr.danger {
            opacity: 0.5;
        }
        .load-more-wrap { margin-bottom: 20px; }
    </style>
{% endblock %}